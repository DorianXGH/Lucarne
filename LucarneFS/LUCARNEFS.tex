\documentclass{article}
\usepackage[british]{babel}
\usepackage[T1]{fontenc}
\usepackage{times}

\title{LucarneFS Specification}
\author{Dorian Bourgeoisat}
\date{\today\\v0.1}

\begin{document}
\maketitle
\newpage
\tableofcontents

\newpage
\section{Definitions}
\subsection{Chain}
Linked list with the last link pointing to the first.
\subsection{First/Last link of a chain}
As a result of the structure of a chain, the last or first links are defined by the objects that hold the structure. The link pointed to by the holding structure is the first link. The link pointing to it is the last link.

\section{General Principles}
\subsection{Chain of blocks}
The underlying structures are almost always a chain. The exception to this is the block itself, or a contiguous file. A block is always 512 bytes long.\newline
The pointer to the next block is a 6 bytes long relative LBA 48 adress little-endian at the end of the block. It has a duplicate. Between the 2 pointers is a 2 bytes long volume identifier and a 2 bytes long metadata bitfield.

\begin{tabular}{|c|c|}
    \hline
    Rel. LBA & Content \\
    \hline
    ... & ...  \\
    \hline
    496 & NEXT\_BLOCK\_LBA48\_DUPLICATE \\
    \hline
    502 & METADATA  \\
    \hline
    504 & VOLUME\_ID  \\
    \hline
    506 & NEXT\_BLOCK\_LBA48  \\
    \hline
  \end{tabular}

\subsection{Free blocks}
Free blocks are maintained in a chain, when a file is deleted, its blocks are put in the beginning of the chain. When a file must be given new blocks, they are taken from the beginning of the chain.
\subsection{Writing to blocks}
To write data in a file, new blocks are allocated and wrtten to with the last block allocated pointing to the rest of the file. Then, the previous block of the file will be updated to point to the new blocks.
The replaced blocks will be put in the free blocks chain using the same method.

\subsection{Hierarchy}

\section{Block Types}

\end{document}